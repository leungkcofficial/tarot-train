# Environment variables for CKD Risk Prediction project

# Database configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ckd_risk
DB_USER=postgres
DB_PASSWORD=password

# ZenML configuration
ZENML_ANALYTICS_OPT_IN=false
ZENML_DEBUG=false

# Data paths
DATA_PATH=./data
OUTPUT_DIR=./data_lake
METADATA_DIR=./metadata

# Random seed
RANDOM_SEED=42

# Column mappings for creatinine data (including demographic data)
CREATININE_PATIENT_ID_COL=Reference Key
CREATININE_TEST_DATE_COL=LIS Reference Datetime
CREATININE_RESULT_VALUE_COL=LIS Result (28 days) - LIS Result: Numeric Result
CREATININE_CASE_NUMBER_COL=LIS Case No.
CREATININE_DOB_COL=Date of Birth (yyyy-mm-dd)
CREATININE_GENDER_COL=Sex
CREATININE_USE_COLUMN_INDEX=false

# Column mappings for hemoglobin data
HEMOGLOBIN_PATIENT_ID_COL=Reference Key
HEMOGLOBIN_TEST_DATE_COL=LIS Reference Datetime
HEMOGLOBIN_RESULT_VALUE_COL=LIS Result (28 days) - LIS Result: Numeric Result
HEMOGLOBIN_CASE_NUMBER_COL=LIS Case No.
HEMOGLOBIN_USE_COLUMN_INDEX=false

# Column mappings for hemoglobin A1c data
HEMOGLOBIN_A1C_PATIENT_ID_COL=Reference Key
HEMOGLOBIN_A1C_TEST_DATE_COL=LIS Reference Datetime
HEMOGLOBIN_A1C_RESULT_VALUE_COL=LIS Result (28 days) - LIS Result: Numeric Result
HEMOGLOBIN_A1C_CASE_NUMBER_COL=LIS Case No.
HEMOGLOBIN_A1C_USE_COLUMN_INDEX=false

# Column mappings for albumin data
ALBUMIN_PATIENT_ID_COL=Reference Key
ALBUMIN_TEST_DATE_COL=LIS Reference Datetime
ALBUMIN_RESULT_VALUE_COL=LIS Result (28 days) - LIS Result: Numeric Result
ALBUMIN_CASE_NUMBER_COL=LIS Case No.
ALBUMIN_USE_COLUMN_INDEX=false

# Column mappings for bicarbonate data
BICARBONATE_PATIENT_ID_COL=0
BICARBONATE_TEST_DATE_COL=3
BICARBONATE_RESULT_VALUE_COL=6
BICARBONATE_CASE_NUMBER_COL=5
BICARBONATE_USE_COLUMN_INDEX=true

# Column mappings for phosphate data
PHOSPHATE_PATIENT_ID_COL=Reference Key
PHOSPHATE_TEST_DATE_COL=LIS Reference Datetime
PHOSPHATE_RESULT_VALUE_COL=LIS Result (28 days) - LIS Result: Numeric Result
PHOSPHATE_CASE_NUMBER_COL=LIS Case No.
PHOSPHATE_USE_COLUMN_INDEX=false

# Column mappings for calcium data
# Calcium data is handled specially with column indices
CALCIUM_KEY_COL_IDX=0
CALCIUM_DATE_COL_IDX=3
CALCIUM_CODE_COL_IDX=5
CALCIUM_TYPE_COL_IDX=6
CALCIUM_VALUE_COL_IDX=7
# Patterns to identify adjusted calcium values (pipe-separated)
CALCIUM_ADJUSTED_PATTERNS=Calcium, albumin adjusted|Calcium (Alb adj)|Alb.Adj.Calcium|ALB Adjusted Calcium|Calcium (adj.)|Albumin Adjusted Calcium|Calcium, Albumin Adjusted

# Column mappings for urine protein/albumin data
# Urine protein/albumin data is handled specially with column indices
UPACR_KEY_COL_IDX=0
UPACR_DATE_COL_IDX=3
UPACR_CODE_COL_IDX=6
UPACR_TYPE_COL_IDX=7
UPACR_VALUE_COL_IDX=12
UPACR_UNIT_COL_IDX=13
# Patterns to identify protein and albumin values (pipe-separated)
UPACR_PROTEIN_PATTERNS=ur. tp / cr ratio|msu_urine protein: creatinine ratio_mg/mmol|msu_urine protein: creatinine ratio_mg/mg|ur protein/creatinine|ur. prot/creat|spot t.prot/creat|urine protein / creatinine|protein creatinine ratio, urine|tp/cr ratio|ur tp/cr ratio|u prot/creat|ur. tp/cr ratio|ur prot/cr ratio|ur. prot/cr ratio|msu_urine protein: creatinine ratio_mg/mg cr|prot/creat ratio|ur prot/creat
UPACR_ALBUMIN_PATTERNS=ur. alb/cr ratio|msu_urine albumin: creatinine ratio_mg/mmol|ur alb/cr ratio|u albumin creatinine ratio|albumin creatinine ratio|microalbumin|ur. albumin/creatinine|urine albumin/creatinine ratio|microalbumin creatinine ratio, urine|albumin/creatinine|alb/creat ratio|msu_urine albumin: creatinine ratio_mg/mmol cr|ur alb/creat
# Note: Data validation rules are now configured in src/default_data_validation_rules.yml

# Column mappings for ICD-10 diagnosis data
# ICD-10 data can be handled with column names or indices
# Column names (for structured CSV files with headers)
ICD10_KEY_COL_NAME=Reference Key
ICD10_DATE_COL_NAME=Appointment Date (yyyy-mm-dd)
ICD10_CODE_PREFIX=Most Recent Diagnosis
ICD10_CODE_SUFFIX=Diagnosis Code (ICD10 v2010)

# Column indices (for CSV files without headers or with numeric column names)
ICD10_KEY_COL_IDX=0
ICD10_DATE_COL_IDX=1
ICD10_CODE_COL_IDX=2
ICD10_DESC_COL_IDX=22

# Column mappings for operation data
# Operation data is handled specially with column names
OPERATION_KEY_COL_NAME=Reference Key
OPERATION_DATE_COL_NAME=OT Date (yyyy-mm-dd)
OPERATION_CODE_COL_NAME=OT Ref No.
OPERATION_PROCEDURE_PREFIX=OT Procedure
# Dialysis-related operation codes (comma-separated)
OPERATION_DIALYSIS_CODES=54.93,39.27,38.95

# Column indices for death data
# Death data is handled specially with column indices
DEATH_KEY_COL_IDX=3
DEATH_DATE_COL_IDX=8
DEATH_CAUSE_COL_IDX=10

# Urine data processing settings
# Unit conversion factor for mg/mg Cr to mg/mmol
URINE_MGMG_TO_MGMMOL_FACTOR=113
# Conversion factor for mg/mmol to mg/g
URINE_MGMMOL_TO_MGG_FACTOR=8.84
# ACR prediction formula coefficients
ACR_PREDICTION_INTERCEPT=5.3920
ACR_PREDICTION_COEF1=0.3072
ACR_PREDICTION_COEF2=1.5793
ACR_PREDICTION_COEF3=1.1266

# Note: All data validation rules are now configured in src/default_data_validation_rules.yml

# Data splitting settings
TEMPORAL_CUTOFF_DATE=2022-01-01
SPATIAL_TEST_RATIO=0.10
RANDOM_SEED=42

# Data imputation settings
# Columns for different imputation strategies
HARD_TRUTH_COLUMNS=dob,gender,endpoint,endpoint_date,endpoint_source,first_sub_60_date
MED_HISTORY_PATTERN=cci_
MED_HISTORY_SPECIFIC=myocardial_infarction,congestive_heart_failure,peripheral_vascular_disease,cerebrovascular_disease,dementia,chronic_pulmonary_disease,rheumatic_disease,peptic_ulcer_disease,mild_liver_disease,diabetes_wo_complication,renal_mild_moderate,diabetes_w_complication,hemiplegia_paraplegia,any_malignancy,liver_severe,renal_severe,hiv,metastatic_cancer,aids,cci_score_total,ht
LAB_COLUMNS=creatinine,hemoglobin,a1c,albumin,phosphate,calcium,ca_adjusted,upcr,uacr,egfr,bicarbonate
STUDY_END_DATE=2023-12-31

# Data preprocessing settings
# Columns for different preprocessing strategies
CATEGORICAL_COLUMNS=gender,dm,ht,sprint,endpoint,endpoint_renal,endpoint_death,endpoint_censored
NUMERICAL_COLUMNS=creatinine,hemoglobin,a1c,albumin,phosphate,calcium,ca_adjusted,upcr,uacr,egfr,age,age_at_obs,bicarbonate

# Model training settings
NETWORK_TYPE=mlp
BATCH_SIZE=64
EPOCHS=100
LEARNING_RATE=0.001
HIDDEN_DIMS=128,64,32
DROPOUT_RATE=0.2
USE_SKLEARN=false

# LSTM-specific settings
HIDDEN_DIM=128
NUM_LAYERS=2
BIDIRECTIONAL=false
SEQUENCE_LENGTH=10

# Survival analysis settings
SURVIVAL_MODEL=
FEATURE_COLS=gender,dm,ht,sprint,a1c,po4,UACR_mg_g,Cr,age,alb,ca,hb,hco3
ALPHA=0.2
SIGMA=0.1
TIME_GRID=

# Cross-validation settings
CV_FOLDS=5

# EDA settings
EDA_OUTPUT_PATH=results
EDA_STATS_ROWS=No. of participants,Age (years),Age < 65 years,Age 65-74 years,Age 75-84 years,Age > 85 years,Male sex,Follow up time in months,CKD-EPI 2021 formula,Baseline eGFR 45-59,Baseline eGFR 30-44,Baseline eGFR 15-29,Baseline eGFR <15,Baseline Albuminuria,A1 (<30 mg/g),A2 (30-300 mg/g),A3 (>300 mg/g),Measured ACR,Calculated PCR,Diabetes,Cardiovascular disease,Myocardial infarction,Heart failure,Stroke or TIA,Peripheral vascular disease,Chronic pulmonary disease,Cancer,Charlson Comorbidity Index,Event 1 by year 5,Event 2 by year 5